{"version":3,"sources":["decorate.js","Sketchpad.js","Pencil.js","Erea.js","index.js"],"names":["util","proxy","e","fn","button","alert","Sketchpad","canvas","document","getElementsByTagName","offsetX","getBoundingClientRect","left","offsetY","top","ctx","getContext","width","getAttribute","height","excute","recover","initSket","onmousedown","beginPath","type","lineConnect","clearSket","onmouseup","img","Image","src","toDataURL","push","params","drawImage","window","onmousemove","closePath","Pencil","color","moveTo","clientX","clientY","lineTo","lineWidth","strokeStyle","stroke","pencil","Erea","x","y","clearRect","erea","tools","getElementsByClassName","back","onclick","Array","from","children","el","classList","remove","target","add","style","background","changeColor","length","pop","cover"],"mappings":"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","file":"画板.e31bb0bc.js","sourceRoot":"..","sourcesContent":["const util = {\r\n  proxy(e, fn) {\r\n    if (e.button === 0) {\r\n      fn && fn(e)\r\n    } else alert('请使用鼠标左键')\r\n  }\r\n}\r\n\r\nexport default util","import util from './decorate'\r\n\r\nexport default class Sketchpad {\r\n  constructor() {\r\n    this.canvas = document.getElementsByTagName ('canvas')[0];\r\n    this.offsetX = this.canvas.getBoundingClientRect ().left;\r\n    this.offsetY = this.canvas.getBoundingClientRect ().top;\r\n    this.ctx = this.canvas.getContext ('2d'); // 拿起画笔\r\n    this.width = this.canvas.getAttribute ('width');\r\n    this.height = this.canvas.getAttribute ('height');\r\n    this.excute = [] // 撤销操作\r\n    this.recover = [] // 恢复操作\r\n    this.initSket()\r\n  }\r\n  initSket() {\r\n    this.canvas.onmousedown = e => {\r\n      util.proxy(e, e => {\r\n        this.ctx.beginPath()\r\n        switch(this.type) {\r\n          case 'pencil':\r\n            this.lineConnect(e)\r\n            break\r\n          case 'erea':\r\n            this.clearSket(e)\r\n            break\r\n          default:\r\n            break\r\n        }\r\n        this.canvas.onmouseup = e => {\r\n          const img = new Image()\r\n          img.src = this.canvas.toDataURL()\r\n          this.excute.push({\r\n            params: [img, 0, 0, this.width, this.height]\r\n          })\r\n          this.ctx.drawImage(...[img, 0, 0, this.width, this.height])\r\n        }\r\n        window.onmouseup = e => {\r\n          this.canvas.onmousemove = null\r\n          this.ctx.closePath()\r\n        }\r\n      })\r\n    }\r\n  }\r\n}","import Sketchpad from './Sketchpad'\r\n\r\nclass Pencil extends Sketchpad {\r\n  constructor() {\r\n    super()\r\n    this.type = 'pencil'\r\n    super.initSket()\r\n  }\r\n  changeColor(color) {\r\n    this.color = color\r\n  }\r\n  lineConnect(e) {\r\n    // this.ctx.save()\r\n    this.ctx.moveTo(e.clientX - this.offsetX, e.clientY - this.offsetY)\r\n    this.canvas.onmousemove = e => {\r\n      this.ctx.lineTo(e.clientX - this.offsetX, e.clientY - this.offsetY)\r\n      this.ctx.lineWidth = 3\r\n      this.ctx.strokeStyle = this.color\r\n      this.ctx.stroke()\r\n    }\r\n  }\r\n}\r\n\r\nconst pencil = new Pencil()\r\n\r\nexport default pencil\r\n","import Sketchpad from './Sketchpad'\r\n\r\nclass Erea extends Sketchpad {\r\n  constructor() {\r\n    super()\r\n    this.type = 'erea'\r\n    super.initSket()\r\n  }\r\n  clearSket(e) {\r\n    this.ctx.strokeStyle = '#000'\r\n    // this.ctx.strokeRect(e.clientX - this.offsetX - 10, e.clientY - this.offsetY - 10, 20, 20)\r\n    this.canvas.onmousemove = e => {\r\n      const x = e.clientX - this.offsetX - 10\r\n      const y = e.clientY - this.offsetY - 10\r\n      // this.ctx.save()\r\n      // this.ctx.beginPath()\r\n      // this.ctx.strokeRect(e.clientX - this.offsetX - 10, e.clientY - this.offsetY - 10, 20, 20)\r\n      // this.ctx.arc(x,y,20,0,2*Math.PI);\r\n      // this.ctx.clip()\r\n      // this.ctx.clearRect(0,0,this.width,this.height);\r\n      // this.ctx.restore();\r\n      // this.ctx.restore()\r\n      // this.ctx.strokeRect(x, y, 20, 20)\r\n      this.ctx.clearRect(x, y, 20, 20)\r\n      // this.ctx.save()\r\n    }\r\n  }\r\n}\r\n\r\nconst erea = new Erea()\r\n\r\nexport default erea\r\n","import Pencil from './Pencil'\r\nimport Erea from './Erea'\r\nimport util from './decorate'\r\n// import Animation from './Animate'\r\n\r\nconst tools = document.getElementsByTagName('ul')[0]\r\nconst erea = document.getElementsByClassName('c-erea')[1]\r\nconst back = document.getElementsByClassName('c-return')[0]\r\nconst recover = document.getElementsByClassName('c-recover')[0]\r\n\r\nPencil.initSket()\r\n// Animation.initCircle()\r\n\r\n// 画笔\r\ntools.onclick = function (e) {\r\n  util.proxy(e, e => {\r\n    Pencil.initSket()\r\n    Array.from(this.children, el => {\r\n      el.classList.remove('c-tool-active')\r\n    })\r\n    e.target.classList.add('c-tool-active')\r\n    const color = e.target.style.background\r\n    Pencil.changeColor(color)\r\n  })\r\n}\r\n\r\n// 橡皮擦\r\nerea.onclick = function () {\r\n  util.proxy(e, function(e) {\r\n    Erea.initSket()\r\n  })\r\n}\r\n\r\n// 撤销\r\nback.onclick = function () {\r\n  Pencil.ctx.clearRect(0, 0, Pencil.width, Pencil.height)\r\n  if (Pencil.excute.length) {\r\n    Pencil.recover.push(Pencil.excute.pop())\r\n    if (Pencil.excute.length) {\r\n      Pencil.ctx.drawImage(...Pencil.excute[Pencil.excute.length - 1].params)\r\n    }\r\n  }\r\n}\r\n\r\n// 恢复\r\nrecover.onclick = function () {\r\n  const cover = Pencil.recover.pop()\r\n  if (cover) {\r\n    Pencil.excute.push(cover)\r\n    Pencil.ctx.clearRect(0, 0, Pencil.width, Pencil.height)\r\n    Pencil.ctx.drawImage(...cover.params)\r\n  } \r\n}"]}